<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tic-Tac-Toe</title>
  <style>
    body{font-family:sans-serif;display:flex;flex-direction:column;align-items:center;padding:2rem}
    .board{display:grid;grid-template-columns:repeat(3,100px);gap:5px}
    .cell{width:100px;height:100px;display:flex;align-items:center;justify-content:center;font-size:48px;background:#f0f0f0;cursor:pointer}
    button{margin-top:1rem;padding:.5rem 1rem}
  </style>
</head>
<body>
  <h1>三目並べ (Tic-Tac-Toe)</h1>
  <div id="status">先手: X</div>
  <div class="board" id="board"></div>
  <button id="reset">リセット</button>

  <script>
    const boardEl = document.getElementById('board');
    const status = document.getElementById('status');
    const resetBtn = document.getElementById('reset');
    let board = Array(9).fill('');
    let turn = 'X';

    function render(){
      boardEl.innerHTML = '';
      board.forEach((v,i)=>{
        const c = document.createElement('div');
        c.className='cell';
        c.textContent = v;
        c.onclick = ()=>{ if(!v && !winner()){ board[i]=turn; turn = turn==='X'?'O':'X'; update(); }};
        boardEl.appendChild(c);
      });
      status.textContent = winner()? ('勝者: ' + winner()) : ('次: ' + turn);
    }

    function lines(){
      return [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];
    }

    function winner(){
      for(const [a,b,c] of lines()){
        if(board[a] && board[a]===board[b] && board[b]===board[c]) return board[a];
      }
      if(board.every(x=>x)) return '引き分け';
      return null;
    }

    function update(){ render(); }

    resetBtn.onclick = ()=>{ board = Array(9).fill(''); turn='X'; update(); };

    render();
  </script>
</body>
</html>
